#!/usr/bin/env python
#coding=utf-8
import socket,time
TCP_IP = '192.168.153.146'
TCP_PORT = 102
client = socket.socket( socket.AF_INET, socket.SOCK_STREAM )
client.connect((TCP_IP, TCP_PORT))
# 建立通讯 copt
client.send(b"\x03\x00\x00\x16\x11\xe0\x00\x00\x00\x01\x00\xc0\x01\x0a\xc1\x02\x02\x00\xc2\x02\x02\x00")
print(client.recv(1024))
# plc通讯
client.send(b"\x03\x00\x00\x19\x02\xf0\x80\x32\x01\x00\x00\xcc\xc1\x00\x08\x00\x00\xf0\x00\x00\x01\x00\x01\x03\xc0")
print(client.recv(1024)) 
# 停止
client.send(b"\x03\x00\x00\x21\x02\xf0\x80\x32\x01\x00\x00\x01\x2e\x00\x10\x00\x00\x29\x00\x00\x00\x00\x00\x09\x50\x5f\x50\x52\x4f\x47\x52\x41\x4d")
print(client.recv(1024))
# 清除
client.send(b"\x03\x00\x00\x23\x02\xf0\x80\x32\x07\x00\x00\x01\x7d\x00\x0c\x00\x06\x00\x01\x12\x08\x12\x48\x1e\x00\x00\x00\x00\x00\xff\x09\x00\x02\x00\x01")
print(client.recv(1024))
client.close()